/*
========================================
--- Core Layout & Structure ---
========================================
*/
:root {
    --font-body: 'Amiri', serif;
    --font-quran: 'Scheherazade New', serif;
    --border-radius-inner: 8px;
    --border-radius-main: 12px;
    --shadow-light: 0 2px 5px rgba(0, 0, 0, 0.05);
    --shadow-medium: 0 5px 15px rgba(0, 0, 0, 0.1);
    --surface-color: #ffffff;
    --text-color-light: #666;

    --background-color: #f4f7f6;
    --text-color: #333;
    --primary-color: #4CAF50;
    --secondary-color: #8BC34A;
    --accent-color: #FFC107;
    --border-color: #ddd;
    --card-background: #fff;
    --input-background: #fff;
    --input-border: #ccc;
    --header-background: #fff;
    --sidebar-background: #fff;
    --nav-button-hover: #eee;
    --tab-active-border: #4CAF50;
    --tab-inactive-text: #555;
    --scroll-thumb: #888;
    --scroll-track: #f1f1f1;
    --game-card-bg: #f0f0f0;
    --game-card-hover-shadow: rgba(0, 0, 0, 0.2);
    --game-card-text: #333;
    --game-card-icon: #4CAF50;
    --game-card-go-btn-bg: #4CAF50;
    --game-card-go-btn-hover-bg: #45a049;
    --game-card-go-btn-text: #fff;

    /* Specific game colors */
    --meaning-match-primary: #8e44ad;
    --meaning-match-secondary: #9b59b6;

    --verse-order-primary: #2af598;
    --verse-order-secondary: #009efd;

    --verse-cascade-primary: #f77062;
    --verse-cascade-secondary: #fe5196;

    --wheel-primary: #ff8c42;
    --wheel-secondary: #ffc048;
    --wheel-segment-1: #FFD700;
    --wheel-segment-2: #FF8C00;
    --wheel-segment-3: #FF4500;
    --wheel-segment-4: #FF6347;

    /* General Games Colors (Green Theme) */
    --general-games-primary: #4CAF50; /* Light Green */
    --general-games-secondary: #388E3C; /* Darker Green */

    /* Section Backgrounds */
    --read-bg-start: #e0f2f7;
    --read-bg-end: #c2e0e8;
    --tafsir-bg-start: #fff3e0;
    --tafsir-bg-end: #ffe0b2;
    --games-bg-start: #f3e5f5;
    --games-bg-end: #e1bee7;
    --general-games-bg-start: #e8f5e9;
    --general-games-bg-end: #c8e6c9;

    /* Glassmorphism Colors */
    --read-glass-bg: rgba(224, 242, 247, 0.7);
    --read-glass-border: rgba(179, 229, 252, 0.8);
    --tafsir-glass-bg: rgba(255, 243, 224, 0.7);
    --tafsir-glass-border: rgba(255, 224, 178, 0.8);
    --games-glass-bg: rgba(243, 229, 245, 0.7);
    --games-glass-border: rgba(225, 190, 231, 0.8);
    --general-games-glass-bg: rgba(232, 245, 233, 0.7);
    --general-games-glass-border: rgba(197, 225, 198, 0.8);

    /* Section Primary/Secondary Colors (for buttons, titles etc.) */
    --read-primary: #3498db;
    --read-secondary: #2980b9;
    --tafsir-primary: #e67e22;
    --tafsir-secondary: #d35400;
    --games-primary: #8e44ad;
    --games-secondary: #9b59b6;

    /* Specific game background colors */
    --verse-order-bg-light: #f0f8ff;
    --verse-order-bg-dark: #1e2a3a;
    --verse-cascade-bg-light: #fff0f5;
    --verse-cascade-bg-dark: #3a1e2a;
}

.dark-mode {
    --font-body: 'Amiri', serif;
    --font-quran: 'Scheherazade New', serif;
    --border-radius-inner: 8px;
    --border-radius-main: 12px;
    --shadow-light: 0 2px 5px rgba(255, 255, 255, 0.05);
    --shadow-medium: 0 5px 15px rgba(255, 255, 255, 0.1);
    --surface-color: #2a2a2a;
    --text-color-light: #aaaaaa;

    --background-color: #1a1a1a;
    --text-color: #e0e0e0;
    --primary-color: #66bb6a;
    --secondary-color: #9ccc65;
    --accent-color: #FFD54F;
    --border-color: #444;
    --card-background: #2a2a2a;
    --input-background: #333;
    --input-border: #555;
    --header-background: #222;
    --sidebar-background: #222;
    --nav-button-hover: #333;
    --tab-active-border: #66bb6a;
    --tab-inactive-text: #bbb;
    --scroll-thumb: #555;
    --scroll-track: #2a2a2a;
    --game-card-bg: #3a3a3a;
    --game-card-hover-shadow: rgba(255, 255, 255, 0.1);
    --game-card-text: #e0e0e0;
    --game-card-icon: #66bb6a;
    --game-card-go-btn-bg: #66bb6a;
    --game-card-go-btn-hover-bg: #5cb85c;
    --game-card-go-btn-text: #1a1a1a;

    /* Dark mode specific game colors */
    --meaning-match-primary: #6a327d;
    --meaning-match-secondary: #7b498c;

    --verse-order-primary: #1e9e6b;
    --verse-order-secondary: #0077b6;

    --verse-cascade-primary: #c25a4e;
    --verse-cascade-secondary: #c9407a;

    --wheel-primary: #b3622e;
    --wheel-secondary: #b38633;
    --wheel-segment-1-dark: #B8860B;
    --wheel-segment-2-dark: #CD5700;
    --wheel-segment-3-dark: #B22222;
    --wheel-segment-4-dark: #A52A2A;

    /* Dark Mode General Games Colors (Darker Green Theme) */
    --general-games-primary: #388E3C; /* Darker Green */
    --general-games-secondary: #2E7D32; /* Even Darker Green */

    /* Dark mode section backgrounds */
    --read-bg-start: #1a2a3a;
    --read-bg-end: #0a1a2a;
    --tafsir-bg-start: #3a2a1a;
    --tafsir-bg-end: #2a1a0a;
    --games-bg-start: #2a1a2a;
    --games-bg-end: #1a0a1a;
    --general-games-bg-start: #1a2a1a;
    --general-games-bg-end: #0a1a0a;

    /* Dark mode glassmorphism colors */
    --read-glass-bg: rgba(26, 42, 58, 0.7);
    --read-glass-border: rgba(10, 26, 42, 0.8);
    --tafsir-glass-bg: rgba(58, 42, 26, 0.7);
    --tafsir-glass-border: rgba(42, 26, 10, 0.8);
    --games-glass-bg: rgba(42, 26, 42, 0.7);
    --games-glass-border: rgba(26, 10, 26, 0.8);
    --general-games-glass-bg: rgba(26, 42, 26, 0.7);
    --general-games-glass-border: rgba(10, 26, 10, 0.8);

    /* Dark mode section primary/secondary colors */
    --read-primary: #5dade2;
    --read-secondary: #85c1e9;
    --tafsir-primary: #f39c12;
    --tafsir-secondary: #f5b041;
    --games-primary: #a569bd;
    --games-secondary: #af7ac5;

    /* Dark mode specific game background colors */
    --verse-order-bg-light: #1a2a3a;
    --verse-order-bg-dark: #0a1a2a;
    --verse-cascade-bg-light: #2a1a1a;
    --verse-cascade-bg-dark: #1a0a0a;
}

*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html, body {
    height: 100%;
    overflow-x: hidden; /* Prevent horizontal scroll */
    overflow-y: auto; /* Allow vertical scroll */
}

body {
    font-family: var(--font-body);
    color: var(--text-color);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    background-color: var(--background-color); /* Ensure a visible background */
    background-attachment: fixed;
    transition: background 0.5s ease, color 0.5s ease, background-color 0.5s ease;
}

main {
    background-color: transparent; /* Ensure main content area is transparent */
    color: var(--text-color); /* Ensure text is visible */
}

body.read-active { background: linear-gradient(135deg, var(--read-bg-start) 0%, var(--read-bg-end) 100%); }
body.tafsir-active { background: linear-gradient(135deg, var(--tafsir-bg-start) 0%, var(--tafsir-bg-end) 100%); }
body.games-active { background: linear-gradient(135deg, var(--games-bg-start) 0%, var(--games-bg-end) 100%); }
body.general-games-active { background: linear-gradient(135deg, var(--general-games-bg-start) 0%, var(--general-games-bg-end) 100%); }

/* Dynamic Header/Sidebar Colors */
.read-active header, .read-active #sidebar { background-color: var(--read-glass-bg); border-color: var(--read-glass-border); }
.tafsir-active header, .tafsir-active #sidebar { background-color: var(--tafsir-glass-bg); border-color: var(--tafsir-glass-border); }
.games-active header, .games-active #sidebar { background-color: var(--games-glass-bg); border-color: var(--games-glass-border); }
.general-games-active header, .general-games-active #sidebar { background-color: var(--general-games-glass-bg); border-color: var(--general-games-glass-border); }

/* Custom Scrollbar */
#content-area::-webkit-scrollbar, #sidebar::-webkit-scrollbar { width: 10px; }
#content-area::-webkit-scrollbar-track, #sidebar::-webkit-scrollbar-track { background: transparent; }
#content-area::-webkit-scrollbar-thumb, #sidebar::-webkit-scrollbar-thumb { background-color: rgba(0,0,0,0.2); border-radius: 20px; }
.dark-mode #content-area::-webkit-scrollbar-thumb, .dark-mode #sidebar::-webkit-scrollbar-thumb { background-color: rgba(255,255,255,0.2); }

/*
========================================
--- App Structure & Header (Flexbox Layout) ---
========================================
*/
#app-container {
    display: flex;
    flex-direction: column;
    height: 100vh;
    overflow: hidden;
}

header {
    flex-shrink: 0;
    padding: 0;
    backdrop-filter: blur(18px) saturate(150%);
    -webkit-backdrop-filter: blur(18px) saturate(150%);
    border-bottom: 1px solid var(--border-color);
    z-index: 100;
    transition: background-color 0.5s ease, border-color 0.5s ease;
    display: flex;
    align-items: center;
}

.header-desktop-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    padding: 0.6rem 2rem;
}

.header-mobile-row { display: none; }

.site-title {
    font-weight: 700;
    font-size: 2rem;
    color: var(--read-primary); /* Use read-primary for site title */
    margin: 0;
    line-height: 1;
}

.main-tabs {
    display: flex;
    gap: 0.5rem;
}

.main-tabs.mobile-tabs { display: none; }

.main-tabs .tab-btn {
    border-radius: var(--border-radius-inner);
    padding: 0.6rem 1.2rem;
    font-size: 1rem;
    font-weight: 700;
    font-family: var(--font-body);
    background-color: transparent;
    border: 2px solid transparent;
    transition: all 0.3s ease;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-color-light); /* Default tab button color */
}

.main-tabs .tab-btn:hover {
    background-color: rgba(0,0,0,0.05); /* Subtle hover effect */
}

.main-tabs .tab-btn.active {
    color: white; /* Active tab text color */
}

.main-tabs .tab-btn .material-icons {
    font-size: 1.2rem;
    margin-bottom: 2px;
}

/* Specific Tab Button Colors */
.main-tabs .tab-btn[data-section="read"] { color: var(--read-secondary); }
.main-tabs .tab-btn[data-section="read"]:hover { background-color: var(--read-primary); color: white; }
.main-tabs .tab-btn[data-section="read"].active { background-color: var(--read-primary); color: #fff; box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3); }

.main-tabs .tab-btn[data-section="tafsir"] { color: var(--tafsir-secondary); }
.main-tabs .tab-btn[data-section="tafsir"]:hover { background-color: var(--tafsir-primary); color: white; }
.main-tabs .tab-btn[data-section="tafsir"].active { background-color: var(--tafsir-primary); color: #fff; box-shadow: 0 4px 15px rgba(230, 126, 34, 0.3); }

.main-tabs .tab-btn[data-section="games"] { color: var(--games-secondary); }
.main-tabs .tab-btn[data-section="games"]:hover { background-color: var(--games-primary); color: white; }
.main-tabs .tab-btn[data-section="games"].active { background-color: var(--games-primary); color: #fff; box-shadow: 0 4px 15px rgba(142, 68, 173, 0.3); }

.main-tabs .tab-btn[data-section="general-games"] { color: var(--general-games-secondary); }
.main-tabs .tab-btn[data-section="general-games"]:hover { background-color: var(--general-games-primary); color: white; }
.main-tabs .tab-btn[data-section="general-games"].active { background-color: var(--general-games-primary); color: #fff; box-shadow: 0 4px 15px rgba(26, 188, 156, 0.3); }

.dark-mode .main-tabs .tab-btn {
    box-shadow: none;
    background-color: transparent;
}

.dark-mode .main-tabs .tab-btn[data-section="read"] { color: var(--read-primary); }
.dark-mode .main-tabs .tab-btn[data-section="tafsir"] { color: var(--tafsir-primary); }
.dark-mode .main-tabs .tab-btn[data-section="games"] { color: var(--games-primary); }
.dark-mode .main-tabs .tab-btn[data-section="general-games"] { color: var(--general-games-primary); }

.dark-mode .main-tabs .tab-btn:hover {
    color: #fff;
}

.dark-mode .main-tabs .tab-btn[data-section="read"].active,
.dark-mode .main-tabs .tab-btn[data-section="read"]:hover {
    background-color: var(--read-primary);
    color: #fff;
    box-shadow: 0 2px 10px rgba(52, 152, 219, 0.4);
}

.dark-mode .main-tabs .tab-btn[data-section="tafsir"].active,
.dark-mode .main-tabs .tab-btn[data-section="tafsir"]:hover {
    background-color: var(--tafsir-primary);
    color: #fff;
    box-shadow: 0 2px 10px rgba(230, 126, 34, 0.4);
}

.dark-mode .main-tabs .tab-btn[data-section="games"].active,
.dark-mode .main-tabs .tab-btn[data-section="games"]:hover {
    background-color: var(--games-primary);
    color: #fff;
    box-shadow: 0 2px 10px rgba(142, 68, 173, 0.4);
}

.dark-mode .main-tabs .tab-btn[data-section="general-games"].active,
.dark-mode .main-tabs .tab-btn[data-section="general-games"]:hover {
    background-color: var(--general-games-primary);
    color: #fff;
    box-shadow: 0 2px 10px rgba(26, 188, 156, 0.4);
}

.header-controls { display: flex; align-items: center; gap: 0.5rem; }

#mute-btn-desktop, #theme-toggle-desktop,
#mute-btn-mobile, #theme-toggle-mobile {
    background-color: transparent;
    border: 2px solid transparent;
    color: var(--text-color-light);
    cursor: pointer;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}

#mute-btn-desktop:hover, #theme-toggle-desktop:hover,
#mute-btn-mobile:hover, #theme-toggle-mobile:hover {
    background-color: var(--surface-color);
    transform: translateY(-1px);
}

/* Section-specific hover colors for control buttons */
.read-active .header-controls button:hover, .read-active .sidebar-header-controls button:hover { color: var(--read-primary); border-color: var(--read-primary); }
.tafsir-active .header-controls button:hover, .tafsir-active .sidebar-header-controls button:hover { color: var(--tafsir-primary); border-color: var(--tafsir-primary); }
.games-active .header-controls button:hover, .games-active .sidebar-header-controls button:hover { color: var(--games-primary); border-color: var(--games-primary); }
.general-games-active .header-controls button:hover, .general-games-active .sidebar-header-controls button:hover { color: var(--general-games-primary); border-color: var(--general-games-primary); }

#sidebar-toggle-btn {
    background-color: transparent;
    border: none;
    color: var(--text-color);
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}

#sidebar-toggle-btn:hover {
    background-color: var(--surface-color);
    color: var(--read-primary);
}

@media (min-width: 769px) {
    #theme-toggle-mobile { display: none !important; }
    #mute-btn-mobile { display: none !important; }
}

@media (max-width: 768px) {
    #theme-toggle-desktop { display: none !important; }
    #theme-toggle-mobile { display: flex !important; }
}

/*
========================================
--- Main Content Layout (Flexbox) ---
========================================
*/
main#explorer-view {
    display: flex;
    flex-direction: row;
    flex-grow: 1;
    overflow: hidden;
}

#sidebar {
    flex-shrink: 0;
    width: 280px;
    backdrop-filter: blur(12px) saturate(180%);
    -webkit-backdrop-filter: blur(12px) saturate(180%);
    border-right: 1px solid;
    overflow-y: auto;
    transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out, background-color 0.5s ease, border-color 0.5s ease;
    padding: 1.5rem;
}

.sidebar-content { display: flex; flex-direction: column; gap: 1.5rem; }

#sidebar h2 {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--text-color);
    margin: 0 0 0.5rem 0;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-color);
}

#content-area {
    flex-grow: 1;
    overflow-y: auto;
    background-color: transparent;
    transition: background 0.5s ease;
    padding: 2rem;
}

.content-section { display: none; }
.content-section.active { display: block; animation: fadeIn 0.5s ease-in-out; }

.section-title {
    font-size: 2.2rem;
    font-weight: 700;
    color: #007bff; /* New color for section titles (a shade of blue) */
    border-bottom: 3px solid;
    margin-top: 0;
    margin-bottom: 1.5rem;
    padding-bottom: 0.5rem;
    display: inline-block;
    font-family: 'Amiri', serif;
}
.read-active .section-title { border-color: var(--read-primary); }
.tafsir-active .section-title { border-color: var(--tafsir-primary); }
.games-active .section-title { border-color: var(--games-primary); }
.general-games-active .section-title { border-color: var(--general-games-primary); }

#games-section {
    position: relative;
}

/*
========================================
--- Surah & Tafsir Display ---
========================================
*/
#surah-container {
    padding: 2.5rem;
    line-height: 2.8;
    font-size: 2.1rem;
    font-family: var(--font-quran);
    background: var(--surface-color);
    border-radius: var(--border-radius-main);
    direction: rtl;
    box-shadow: var(--shadow-medium);
    border: 1px solid #e0e0e0;
}

.basmallah {
    text-align: center;
    font-size: 1.5rem; /* Smaller font size for basmallah */
    font-weight: bold;
    color: #0056b3;
    margin-bottom: 1.5rem; /* Less space below */
    padding: 0;
    border-bottom: none;
    font-family: var(--font-quran);
    background: none;
    border-radius: 0;
    box-shadow: none;
    letter-spacing: 0.05em;
    line-height: 1.2;
}
.verse-number {
    color: var(--read-primary);
    font-size: 1.6rem; /* Slightly reduced font size for verse number */
    font-family: sans-serif;
    margin-right: 0.5rem;
    font-weight: bold;
    display: inline-block;
    transform: translateY(-5px);
}

.tafsir-item {
    margin-bottom: 1.5rem;
    padding: 1.5rem;
    border-right: 4px solid var(--tafsir-primary);
    background-color: var(--surface-color);
    border-radius: var(--border-radius-inner);
    box-shadow: var(--shadow-light);
    border: 1px solid #e0e0e0;
}
.tafsir-item h4 {
    font-size: 1.2rem;
    color: var(--tafsir-secondary);
    font-family: 'Amiri', serif;
    margin-top: 0;
    margin-bottom: 0.5rem;
}
.tafsir-item p {
    font-family: 'Amiri', serif;
    font-size: 1.5rem; /* Tafsir text size remains the same as last request */
    line-height: 1.8;
}

/* --- Form Elements --- */
select, input[type="number"] {
    width: 100%;
    padding: 0.8rem;
    font-family: var(--font-body);
    border-radius: var(--border-radius-inner);
    border: 1px solid var(--border-color);
    background-color: var(--surface-color);
    color: var(--text-color);
    transition: box-shadow 0.2s, border-color 0.2s;
    font-size: 1rem;
}
select:focus, input[type="number"]:focus {
    box-shadow: 0 0 0 3px var(--read-glass-border);
    border-color: var(--read-primary);
    outline: none;
}
#verse-range-selector {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.75rem;
    align-items: center;
}

#verse-range-selector label {
    font-size: 0.85rem;
    color: var(--text-color-light);
    grid-column: 1 / -1;
    margin-bottom: -0.5rem;
}

/*
========================================
--- Game Area & Containers ---
========================================
*/
#game-area, #general-game-area { background: transparent; padding: 0; font-family: var(--font-body); position: relative; }

.games-cards-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    padding: 1rem 0;
}

.game-card {
    color: white;
    border-radius: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    min-height: 300px; /* Slightly taller */
}

.game-card-inner {
    width: 100%;
    height: 100%;
    padding: 1.5rem; /* Adjusted padding */
    border-radius: 20px; /* Increased for more roundness */
    box-shadow: 0 4px 15px rgba(0,0,0,0.1); /* Softer shadow */
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Smoother, bouncier transition */
    border: 1px solid rgba(255, 255, 255, 0.2); /* Subtle border */
    position: relative;
    z-index: 2; /* Ensure inner card is above ::before */
    display: flex; /* Inherit flex properties from parent */
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.game-card-inner {
    width: 100%;
    height: 100%;
    padding: 1.5rem; /* Add padding to inner card */
    border-radius: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1); /* Add shadow to inner card */
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Add transition to inner card */
    position: relative;
    z-index: 2; /* Ensure inner card is above ::before */
    border: 1px solid rgba(255, 255, 255, 0.2); /* Add border to inner card */
}

.game-card:hover .game-card-inner {
    transform: translateY(-10px) scale(1.03); /* More pronounced lift and scale */
    box-shadow: 0 15px 30px rgba(0,0,0,0.2); /* Stronger shadow on hover */
}

.game-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 50%); /* Subtle shine */
    transition: opacity 0.4s ease;
    opacity: 0;
    z-index: 1; /* Ensure it's above the background but below content */
}

.game-card:hover::before {
    opacity: 1;
}

.game-card .icon {
    font-size: 4rem; /* Larger icon */
    margin-bottom: 1rem;
    text-shadow: 0 4px 8px rgba(0,0,0,0.25);
    transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.game-card:hover .icon {
    transform: scale(1.1); /* Animate icon on hover */
}

.game-card .title {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 0.75rem;
}

.game-card .desc {
    font-size: 1rem;
    line-height: 1.6;
    margin-bottom: 1.5rem;
    flex-grow: 1;
    opacity: 0.9;
}

.game-card .go-btn {
    background-color: rgba(0, 0, 0, 0.3); /* Revert to original background */
    color: white;
    border: 2px solid white;
    border-radius: 50px;
    padding: 0.75rem 2rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1); /* Smoother and more noticeable transition */
    backdrop-filter: blur(5px);
    margin-top: auto;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.game-card .go-btn:hover {
    background-color: white !important;
    color: black !important; /* Ensure black text */
    border-color: black !important; /* Change border to black */
    transform: scale(1.25) translateY(-10px) !important; /* Strong scale and lift */
    box-shadow: 0 20px 40px rgba(0,0,0,0.7) !important; /* Strong shadow */
    border-radius: 50px !important; /* Keep border radius */
}

.dark-mode .game-card-inner {
    border-color: rgba(255, 255, 255, 0.1);
}

.dark-mode .game-card-inner::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.4);
    border-radius: 20px;
    z-index: 1;
    transition: background-color 0.4s ease;
}

.dark-mode .game-card:hover .game-card-inner::after {
    background-color: rgba(0, 0, 0, 0.2);
}

.dark-mode .game-card .go-btn {
    background-color: rgba(0, 0, 0, 0.2);
    border-color: rgba(255, 255, 255, 0.7);
}

.dark-mode .game-card .go-btn:hover {
    background-color: white !important;
    color: black !important; /* Ensure black text */
    border-color: black !important; /* Change border to black */
    transform: scale(1.25) translateY(-10px) !important; /* Strong scale and lift */
    box-shadow: 0 20px 40px rgba(255, 255, 255, 0.7) !important; /* Strong shadow */
    border-radius: 50px !important; /* Keep border radius */
}

.game-container {
    display: none;
    background: var(--surface-color);
    border-radius: var(--border-radius-main);
    border: 1px solid #e0e0e0;
    box-shadow: var(--shadow-medium);
    padding: 2rem;
    margin-top: 1.5rem;
    position: relative;
}
.game-container.active { display: block; animation: fadeIn 0.4s; }

.hidden { display: none !important; }
.block { display: block; }
.grid { display: grid; }
.flex { display: flex; }

.back-to-games-btn {
    position: absolute;
    top: 1.5rem; /* Adjusted top position to align with title */
    left: 1rem;
    background-color: var(--games-glass-bg); /* Color similar to games section background */
    backdrop-filter: blur(10px);
    border: none; /* Removed border */
    border-radius: 50%; /* Make it a circle */
    width: 40px; /* Fixed width */
    height: 40px; /* Fixed height */
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
}

.spin-button:hover {
    background-color: var(--wheel-secondary);
    transform: translate(-50%, -50%) scale(1.05);
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
}

.spin-button:disabled {
    background-color: #ccc;
    cursor: not-allowed;
    box-shadow: none;
    transform: translate(-50%, -50%);
}

.dark-mode .spin-button {
    background-color: var(--wheel-secondary);
    box-shadow: 0 5px 15px rgba(255,255,255,0.1);
}

.dark-mode .spin-button:hover {
    background-color: var(--wheel-primary);
    box-shadow: 0 8px 20px rgba(255,255,255,0.2);
}

.dark-mode .spin-button:disabled {
    background-color: #555;
}
    color: var(--text-color); /* Ensure icon color is visible */
    box-shadow: none; /* Removed box-shadow */
}
.back-to-games-btn .material-icons {
    font-size: 24px; /* Larger arrow icon */
}
.back-to-games-btn:hover { background-color: rgba(142, 68, 173, 0.2); /* Slightly darker on hover */ }

#verse-order-game .game-title {
    font-size: 2.2rem;
    color: var(--verse-order-primary);
    text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
}

#verse-order-area {
    padding: 1.5rem;
    border-radius: var(--border-radius-main);
    background: linear-gradient(135deg, #e0f7fa, #d4f1f4);
    min-height: 300px;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    border: 1px solid var(--verse-order-secondary);
    box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
}

.verse-order-item {
    background: linear-gradient(145deg, var(--verse-order-primary), var(--verse-order-secondary));
    color: white;
    padding: 1rem;
    border-radius: var(--border-radius-inner);
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    cursor: grab;
    transition: all 0.2s ease-in-out;
    font-family: var(--font-quran);
    font-size: 1.3rem;
    line-height: 1.8;
    border: none;
    user-select: none;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
}

.dark-mode #verse-order-area {
    background: linear-gradient(135deg, #1a2a3a, #0a1a2a);
    border-color: var(--verse-order-secondary);
}

.dark-mode .verse-order-item {
    background: linear-gradient(145deg, var(--verse-order-primary), var(--verse-order-secondary));
    color: #fff;
    box-shadow: 0 4px 10px rgba(0,0,0,0.4);
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
}

.btn-check, .btn-reset {
    background-color: var(--verse-order-primary);
    color: white;
    border: none;
    padding: 0.8rem 1.5rem;
    border-radius: var(--border-radius-inner);
    font-size: 1.1rem;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.2s ease;
    margin-top: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
}

.btn-check:hover, .btn-reset:hover {
    background-color: var(--verse-order-secondary);
    transform: translateY(-2px);
}

.dark-mode .btn-check, .dark-mode .btn-reset {
    background-color: var(--verse-order-secondary);
}

.dark-mode .btn-check:hover, .dark-mode .btn-reset:hover {
    background-color: var(--verse-order-primary);
}

.feedback-correct {
    color: #28a745; /* Green for correct feedback */
}

.feedback-incorrect {
    color: #dc3545; /* Red for incorrect feedback */
}

.verse-order-item.dragging { opacity: 0.5; transform: scale(1.02); }

/*
========================================
--- Meaning Match Game Styles ---
========================================
*/

#meaning-match-game .game-title {
    color: var(--meaning-match-primary);
    text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
    font-size: 2.2rem; /* Increased font size */
}

#meaning-match-game .game-instructions {
    color: var(--meaning-match-secondary);
}

.meaning-game-area {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    margin-bottom: 1.5rem;
    padding: 1rem;
    background: linear-gradient(135deg, var(--games-bg-start), var(--games-bg-end));
    border-radius: var(--border-radius-main);
}

.words-container, .meanings-container {
    padding: 1rem;
    border-radius: var(--border-radius-inner);
    background-color: rgba(255, 255, 255, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.6);
    backdrop-filter: blur(5px);
    min-height: 320px;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    box-shadow: var(--shadow-light);
}

.dark-mode .words-container, .dark-mode .meanings-container {
    background-color: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.dark-mode .word-item {
    background: linear-gradient(145deg, var(--games-primary), var(--games-secondary));
    box-shadow: 0 4px 10px rgba(0,0,0,0.4);
}

.dark-mode .word-item.matched {
    background: #333;
    opacity: 0.5;
}

.dark-mode .meaning-box {
    border-color: var(--games-primary);
    color: var(--games-primary);
}

.dark-mode .meaning-box.over {
    background: rgba(165, 105, 189, 0.2);
    border-color: var(--games-secondary);
}

.dark-mode .meaning-box.correct {
    background-color: #27ae60;
    border-color: #2ecc71;
    color: #fff;
}

.dark-mode .meaning-box.incorrect {
    background-color: #e74c3c;
    border-color: #c0392b;
    color: #fff;
}

.word-item {
    background: linear-gradient(145deg, var(--meaning-match-primary), var(--meaning-match-secondary));
    color: white;
    border: none;
    padding: 1rem 1.2rem;
    border-radius: var(--border-radius-inner);
    font-family: var(--font-body);
    font-weight: bold;
    text-align: center;
    cursor: grab;
    transition: all 0.2s ease;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
}

.word-item:hover {
    transform: translateY(-3px) scale(1.03);
    box-shadow: 0 6px 15px rgba(0,0,0,0.3);
}

.word-item.dragging {
    opacity: 0.7;
    transform: scale(1.05);
    box-shadow: var(--shadow-medium);
}

.word-item.matched {
    opacity: 0.3;
    cursor: not-allowed;
    background: var(--border-color);
    text-decoration: line-through;
    box-shadow: none;
    transform: none;
}

.meaning-box {
    flex-grow: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    border: 3px dashed var(--meaning-match-primary);
    border-radius: var(--border-radius-inner);
    background-color: transparent;
    color: var(--meaning-match-primary);
    font-weight: bold;
    transition: all 0.2s ease;
}

.meaning-box.over {
    background: var(--games-glass-bg);
    border-color: var(--meaning-match-secondary);
    border-style: solid;
    transform: scale(1.02);
}

.meaning-box.correct {
    background-color: #2ecc71; /* A bright, clear green for success */
    border-color: #27ae60;
    color: white;
    border-style: solid;
    font-weight: bold;
    animation: pulse 0.5s;
}

.meaning-box.correct .material-icons {
    margin-right: 0.5rem;
    animation: spin-icon 0.5s ease-out;
}

.meaning-box.incorrect {
    animation: shake 0.5s;
    border-color: #e74c3c;
    background-color: #e74c3c;
    color: white;
}

.game-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 1rem;
    padding: 0 1rem;
}

.game-score {
    font-size: 1.3rem;
    font-weight: bold;
    color: var(--meaning-match-primary);
}

.dark-mode .game-score {
    color: var(--games-primary);
}

.btn-reset-game {
    background: transparent;
    border: none;
    color: var(--text-color-light);
    font-size: 1.8rem;
    cursor: pointer;
    border-radius: 50%;
    width: 44px;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.btn-reset-game:hover {
    background-color: var(--games-glass-bg);
    color: var(--meaning-match-primary);
    transform: rotate(90deg);
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

@keyframes spin-icon {
    from { transform: rotate(0deg) scale(0.5); }
    to { transform: rotate(360deg) scale(1); }
}


/*
========================================
--- General Elements & Animations ---
========================================
*/
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/*
========================================
--- Responsive Adjustments ---
========================================
*/
@media (max-width: 992px) {
    #sidebar { width: 200px; }
    .header-desktop-row { padding: 0.6rem 1.5rem; }
    .site-title { font-size: 1.8rem; }
    .main-tabs .tab-btn { padding: 0.6rem 1rem; font-size: 1rem; }
    #sidebar { padding: 1rem; }
    #content-area { padding: 1.5rem; }
    .section-title { font-size: 2rem; }
    #surah-container { font-size: 1.8rem; }
}

@media (max-width: 768px) {
    html, body { overflow-y: auto; }
    #app-container { height: auto; }
    header { padding: 0.5rem 1rem; }
    .header-desktop-row { display: none; }
    .header-mobile-row { display: flex; width: 100%; justify-content: space-between; align-items: center; }
    .site-title { font-size: 1.5rem; order: 2; }
    #sidebar-toggle-btn { display: block; background: none; border: none; cursor: pointer; padding: 0.5rem; font-size: 1.5rem; color: var(--text-color); order: 1; }
    main#explorer-view { flex-direction: column; height: auto; }
    #sidebar { position: fixed; top: 0; right: 0; height: 100%; width: 280px; z-index: 1001; transform: translateX(100%); box-shadow: -4px 0 15px rgba(0,0,0,0.1); border-right: none; background-color: var(--surface-color); }
    #sidebar.sidebar-open { transform: translateX(0); }
    #sidebar-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); z-index: 1000; display: none; opacity: 0; transition: opacity 0.3s; }
    #sidebar-overlay.active { display: block; opacity: 1; }
    .sidebar-header-controls { display: flex; justify-content: flex-end; padding-bottom: 1rem; border-bottom: 1px solid var(--border-color); margin-bottom: 1rem; }
    #mute-btn-mobile { display: flex; background: transparent; border: none; color: var(--text-color); cursor: pointer; padding: 0.5rem; border-radius: 50%; align-items: center; justify-content: center; }
    .main-tabs.desktop-tabs { display: none; }
    .main-tabs.mobile-tabs { display: flex; flex-direction: column; width: 100%; gap: 0.5rem; }
    #content-area { padding: 1rem; }
    .section-title { font-size: 1.8rem; }
    #surah-container { font-size: 1.5rem; line-height: 2.2; padding: 1rem; }
    .tafsir-item { padding: 1rem; }
    .meaning-game-area { grid-template-columns: 1fr; }
    .games-cards-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
    }
    .game-card {
        min-height: auto;
        padding: 1.5rem;
        border-radius: 20px;
    }
    .game-card .icon { 
        font-size: 3.5rem;
        margin-bottom: 0.75rem; 
    }
    .game-card .title { 
        font-size: 1.4rem;
        margin-bottom: 0.5rem; 
    }
    .game-card .desc { 
        font-size: 1rem;
        line-height: 1.6;
        margin-bottom: 1rem; 
    }
    .game-card .go-btn {
        padding: 0.6rem 1.5rem;
        font-size: 1rem;
    }

    .wheel-container {
        width: 90vw;       /* Use viewport width for responsiveness */
        max-width: 280px;  /* Set a max size */
        aspect-ratio: 1 / 1; /* Force a square shape, which becomes a circle */
        margin-left: auto;
        margin-right: auto;
    }

    .wheel-text {
        font-size: 0.9rem; /* Smaller font for the smaller wheel */
    }

    /* Adjust text positioning for the smaller wheel */
    .text-1 { transform: translate(-50%, -50%) rotate(45deg) translate(75px) rotate(-45deg); }
    .text-2 { transform: translate(-50%, -50%) rotate(135deg) translate(75px) rotate(-135deg); }
    .text-3 { transform: translate(-50%, -50%) rotate(225deg) translate(75px) rotate(-225deg); }
    .text-4 { transform: translate(-50%, -50%) rotate(315deg) translate(75px) rotate(-315deg); }

    .spin-button {
        width: 80px;
        height: 80px;
        font-size: 1.5rem;
    }

    /* Ensure the parent container of wheel-container is also centered or has appropriate padding */
    #general-wheel-game .game-content-area {
        display: flex;
        flex-direction: column;
        align-items: center; /* Center items horizontally */
        padding: 1rem; /* Add some padding */
    }
}

/* Verse Cascade Game Styles */
.difficulty-selector {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    align-items: center;
    margin-top: 2rem;
    padding: 2rem;
    background-color: var(--surface-color);
    border-radius: var(--border-radius-main);
    box-shadow: var(--shadow-medium);
}

.dark-mode .difficulty-selector {
    background-color: var(--surface-color);
}

.difficulty-selector h3 {
    color: var(--text-color);
    font-size: 1.8rem;
    margin-bottom: 1.5rem;
}

.btn-difficulty {
    background-color: var(--verse-cascade-primary);
    color: white;
    border: none;
    padding: 0.8rem 2rem;
    border-radius: var(--border-radius-inner);
    font-size: 1.2rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: var(--shadow-medium);
    width: 100%;
    max-width: 250px;
}

.btn-difficulty:hover {
    background-color: var(--verse-cascade-secondary);
    transform: translateY(-2px);
    box-shadow: var(--shadow-medium);
}

.dark-mode .btn-difficulty {
    background-color: var(--verse-cascade-secondary);
}

.dark-mode .btn-difficulty:hover {
    background-color: var(--verse-cascade-primary);
}

#verse-cascade-game .game-title {
    font-size: 2.2rem;
    color: var(--verse-cascade-primary);
    text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
}

#cascade-area {
    position: relative;
    width: 100%;
    height: 400px; /* Fixed height for the falling area */
    border: 2px dashed var(--verse-cascade-primary);
    border-radius: var(--border-radius-main);
    overflow: hidden;
    background: linear-gradient(to bottom, #fff0f5, #ffe4e1);
    margin-top: 1.5rem;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
}

.cascade-word {
    position: absolute;
    top: -50px; /* Start above the visible area */
    background: linear-gradient(145deg, var(--verse-cascade-primary), var(--verse-cascade-secondary));
    color: white;
    padding: 0.6rem 1rem;
    border-radius: 20px;
    font-family: var(--font-quran);
    font-size: 1.5rem;
    font-weight: bold;
    text-align: center;
    white-space: nowrap;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    animation: fall linear forwards;
    z-index: 5;
    border: none;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
}

.dark-mode .cascade-word {
    background: linear-gradient(145deg, var(--verse-cascade-primary), var(--verse-cascade-secondary));
    color: #fff;
    box-shadow: 0 4px 10px rgba(0,0,0,0.4);
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    border: none;
}

.cascade-word.incorrect {
    background-color: #e74c3c; /* Red for incorrect */
    animation: none; /* Stop falling */
    opacity: 0.7;
}

@keyframes fall {
    to { top: calc(100% + 50px); }
}

#cascade-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
    padding: 0.5rem 1rem;
    background-color: var(--surface-color);
    border-radius: var(--border-radius-inner);
    box-shadow: var(--shadow-light);
}

.dark-mode #cascade-header {
    background-color: var(--surface-color);
}

#cascade-info span {
    font-size: 1.1rem;
    font-weight: bold;
    color: var(--text-color);
    margin-left: 1rem;
}

.full-verse-text {
    font-size: 1.2rem;
    color: var(--text-color-light);
    margin-bottom: 0.5rem;
}

.caught-words-display {
    font-family: var(--font-quran);
    font-size: 1.8rem;
    line-height: 1.6;
    color: var(--text-color);
    min-height: 40px;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.remaining-indicator {
    color: var(--text-color-light);
    opacity: 0.7;
}

#cascade-verse-display {
    text-align: center;
    margin-top: 1rem;
    padding: 1rem;
    background-color: var(--background-color);
    border-radius: var(--border-radius-inner);
    box-shadow: var(--shadow-light);
    font-family: var(--font-quran);
    font-size: 1.6rem;
    line-height: 2.2rem;
    color: var(--text-color);
    min-height: 80px;
    display: flex;
    flex-direction: column; /* Changed to column */
    align-items: center;
    justify-content: center;
    border: 1px solid var(--border-color);
}

.dark-mode #cascade-verse-display {
    background-color: var(--background-color);
}

#reset-cascade-btn {
    background-color: var(--games-primary); /* Purple from games section */
    color: white;
    border: none;
    padding: 0.6rem 1.2rem;
    border-radius: var(--border-radius-inner);
    font-size: 1rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: var(--shadow-light);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

#reset-cascade-btn:hover {
    background-color: var(--games-secondary);
    transform: translateY(-2px);
}

.dark-mode #reset-cascade-btn {
    background-color: var(--games-secondary);
}

.dark-mode #reset-cascade-btn:hover {
    background-color: var(--games-primary);
}

.cascade-end-message {
    text-align: center;
    padding: 2rem;
    background-color: var(--surface-color);
    border-radius: var(--border-radius-main);
    box-shadow: var(--shadow-medium);
    margin-top: 2rem;
}

.dark-mode .cascade-end-message {
    background-color: var(--surface-color);
}

.cascade-end-message h2 {
    color: var(--verse-cascade-primary);
    font-size: 2rem;
    margin-bottom: 1rem;
}

.cascade-end-message p {
    color: var(--text-color);
    font-size: 1.2rem;
    margin-bottom: 1.5rem;
}

.cascade-end-message .btn-check {
    background-color: var(--verse-cascade-primary);
    color: white;
    border: none;
    padding: 0.8rem 2rem;
    border-radius: var(--border-radius-inner);
    font-size: 1.2rem;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: var(--shadow-medium);
}

.cascade-end-message .btn-check:hover {
    background-color: var(--verse-cascade-secondary);
    transform: translateY(-2px);
}

.dark-mode .cascade-end-message .btn-check {
    background-color: var(--verse-cascade-secondary);
}

.dark-mode .cascade-end-message .btn-check:hover {
    background-color: var(--verse-cascade-primary);
}

/*
========================================
--- Game Question Modal ---
========================================
*/
.game-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
    padding: 1rem;
}

.game-modal-overlay.active {
    opacity: 1;
    visibility: visible;
}

.game-modal-content {
    background: var(--surface-color);
    color: var(--text-color);
    padding: 2rem;
    border-radius: var(--border-radius-main);
    box-shadow: var(--shadow-medium);
    width: 100%;
    max-width: 600px;
    position: relative;
    transform: scale(0.95);
    transition: transform 0.3s ease;
    display: flex;
    flex-direction: column;
}

.game-modal-overlay.active .game-modal-content {
    transform: scale(1);
}

.dark-mode .game-modal-content {
    background: #2c3e50; /* A dark blue-grey for dark mode */
    color: #ecf0f1;
}

.game-modal-close-btn {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: transparent;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: var(--text-color-light);
    padding: 0.5rem;
    line-height: 1;
    border-radius: 50%;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
}

.game-modal-close-btn:hover {
    background-color: rgba(0,0,0,0.1);
    transform: rotate(90deg);
}

.dark-mode .game-modal-close-btn {
    color: #bdc3c7;
}
.dark-mode .game-modal-close-btn:hover {
    background-color: rgba(255,255,255,0.1);
}


#modal-question-title {
    font-size: 1.8rem;
    color: #FFFFFF !important; /* Force white color */
    margin-bottom: 1rem;
    padding-left: 2.5rem; /* Add padding to avoid overlap with close button */
}

#modal-question-text {
    font-size: 1.5rem;
    font-family: var(--font-quran);
    line-height: 2;
    margin-bottom: 1.5rem;
}

.question-options-container {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    margin-bottom: 1rem;
}

.option-button {
    padding: 1rem;
    font-size: 1.2rem;
    font-family: var(--font-body);
    border: 2px solid var(--border-color);
    background-color: transparent;
    color: var(--text-color);
    border-radius: var(--border-radius-inner);
    cursor: pointer;
    transition: all 0.2s ease;
}

.option-button:hover {
    background-color: var(--games-glass-bg);
    border-color: var(--games-primary);
}

.dark-mode .option-button {
    border-color: #4a4a4a;
}

.dark-mode .option-button:hover {
    background-color: var(--games-glass-bg);
    border-color: var(--games-primary);
}

.feedback-message {
    font-weight: bold;
    font-size: 1.2rem;
    padding: 0.5rem;
    border-radius: var(--border-radius-inner);
    min-height: 40px;
}
.feedback-correct { color: #27ae60; }
.feedback-incorrect { color: #c0392b; }

.action-buttons {
    margin-top: 1rem;
}

/* This is the crucial part for mobile */
@media (max-width: 768px) {
    .game-modal-content {
        padding: 1.5rem;
        max-height: 85vh;
        overflow-y: auto;
    }

    #modal-question-title {
        font-size: 1.5rem;
    }

    #modal-question-text {
        font-size: 1.2rem;
        line-height: 1.8;
    }

    .option-button {
        padding: 0.8rem;
        font-size: 1rem;
    }
}

/*
========================================
--- Game Question Modal ---
========================================
*/
.game-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
    padding: 1rem;
}

.game-modal-overlay.active {
    opacity: 1;
    visibility: visible;
}

.game-modal-content {
    background: var(--surface-color);
    color: var(--text-color);
    padding: 2rem;
    border-radius: var(--border-radius-main);
    box-shadow: var(--shadow-medium);
    width: 100%;
    max-width: 600px;
    position: relative;
    transform: scale(0.95);
    transition: transform 0.3s ease;
    display: flex;
    flex-direction: column;
}

.game-modal-overlay.active .game-modal-content {
    transform: scale(1);
}

.dark-mode .game-modal-content {
    background: #2c3e50; /* A dark blue-grey for dark mode */
    color: #ecf0f1;
}

.game-modal-close-btn {
    position: absolute;
    top: 0.5rem;
    left: 0.5rem; /* Switched to left for RTL consistency */
    background: transparent;
    border: none;
    font-size: 2rem;
    cursor: pointer;
    color: var(--text-color-light);
    padding: 0.5rem;
    line-height: 1;
    border-radius: 50%;
    transition: background-color 0.2s ease;
}

.game-modal-close-btn:hover {
    background-color: rgba(0,0,0,0.1);
}

.dark-mode .game-modal-close-btn {
    color: #bdc3c7;
}
.dark-mode .game-modal-close-btn:hover {
    background-color: rgba(255,255,255,0.1);
}


#modal-question-title {
    font-size: 1.8rem;
    color: var(--games-primary);
    margin-bottom: 1rem;
}

#modal-question-text {
    font-size: 1.5rem;
    font-family: var(--font-quran);
    line-height: 2;
    margin-bottom: 1.5rem;
}

.question-options-container {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    margin-bottom: 1rem;
}

.option-button {
    padding: 1rem;
    font-size: 1.2rem;
    font-family: var(--font-body);
    border: 2px solid var(--border-color);
    background-color: transparent;
    color: var(--text-color);
    border-radius: var(--border-radius-inner);
    cursor: pointer;
    transition: all 0.2s ease;
}

.option-button:hover {
    background-color: var(--games-glass-bg);
    border-color: var(--games-primary);
}

.dark-mode .option-button {
    border-color: #4a4a4a;
}

.dark-mode .option-button:hover {
    background-color: var(--games-glass-bg);
    border-color: var(--games-primary);
}

.feedback-message {
    font-weight: bold;
    font-size: 1.2rem;
    padding: 0.5rem;
    border-radius: var(--border-radius-inner);
    min-height: 40px;
}
.feedback-correct { color: #27ae60; }
.feedback-incorrect { color: #c0392b; }

.action-buttons {
    margin-top: 1rem;
}

/* This is the crucial part for mobile */
@media (max-width: 768px) {
    .game-modal-content {
        padding: 1.5rem;
        /* Set a max-height relative to the viewport height */
        max-height: 85vh;
        /* Enable vertical scrolling ONLY when content overflows */
        overflow-y: auto;
    }

    #modal-question-title {
        font-size: 1.5rem;
    }

    #modal-question-text {
        font-size: 1.2rem;
        line-height: 1.8;
    }

    .option-button {
        padding: 0.8rem;
        font-size: 1rem;
    }
/*         media query */
}